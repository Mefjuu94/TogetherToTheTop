<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integracja z Mapy.cz</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <meta name="_csrf" content="TWÃ“J_TOKEN_CSRF">


    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

    <!-- Leaflet Locate Control CSS (for user location) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.locatecontrol@0.72.0/dist/L.Control.Locate.min.css" />

    <!-- Leaflet MarkerCluster CSS (for marker clustering) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />

    <script src="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css" rel="stylesheet" />

    <link type="text/css" th:href="@{/css/map.css}" rel="stylesheet" />

</head>
<body>
<div id="container">

    <div id="sidebar">
        <h3>Route Planner</h3>
        <div><button id="locateMeBtn">Locate me ğŸ“</button></div>
        <label for="searchInput"></label><input type="text" id="searchInput" placeholder="Search..." />
        <button id="searchBtn">Search</button>
        <div id="searchResults" class="dropdown"></div>
        <div>Waypoints :</div>
        <div id="waypointsContainer">
            <ul id="waypointsList"></ul>
        </div>
        <div id="routeInfo">
            <p><strong>Distance:</strong> <span id="distance"></span></p>
            <p><strong>Duration:</strong> <span id="duration"></span></p>
            <button id="addSavedWaypointBtn">Add Saved Waypoint</button>
        </div>
        <div id="poiFilters">
            <label><input type="checkbox" id="restaurant" > Restaurants ğŸ½ï¸</label><br>
            <label><input type="checkbox" id="cafe" > Cafes â˜•</label><br>
            <label><input type="checkbox" id="parking" checked> Parking ğŸ…¿ï¸</label><br>
            <label><input type="checkbox" id="school" checked> Schools ğŸ«</label><br>
            <label><input type="checkbox" id="hospital" checked> Hospitals ğŸ¥</label><br>
            <label><input type="checkbox" id="peak" checked> Peaks â›°ï¸</label><br> <!-- Added Peaks checkbox -->
            <label><input type="checkbox" id="generalPoi" > General POIs ğŸ“</label><br> <!-- Added General POIs checkbox -->
        </div>
    </div>

    <div id="map"></div>
    <!-- Sekcja ogÅ‚oszenia -->
    <div id="annoucement_information">
    <h2>Annoucement information</h2>
        <div>
        <p th:each="tekst: ${array}"
                th:text="${tekst}"></p>
        </div>
    <form>
        <!-- Sekcja opisu -->
        <div class="form-group">
            <label for="description">describe your trip:</label>
            <textarea id="description" rows="6" placeholder="Description of destination, route, etc."></textarea>
        </div>

        <!-- Checkboxy z opcjami -->
        <div class="checkbox-group">
            <label>
                <input type="checkbox" id="driver"> I am driving a vehicle and I can take someone with me
            </label>
            <label id="DriverPeopleInputLabel" style="display: none;">
                specify number of people: <input type="text" id="DriverPeopleInput" min="1" max="99" placeholder="amount of people 1-99" value="1">
            </label>

            <label><input type="checkbox"> I tolerate animals</label>
            <label>
                <input type="checkbox" id="closedGroupCheckbox"> Closed group (limiting the number of people)
            </label>
            <label id="peopleInputLabel" style="display: none;" >
                specify number of people: <input type="text" min="1" max="99" required id="peopleInput" placeholder="amount of people 1-99" value="1">
            </label>
        </div>
    </form>
        <div>
            <button id="save_announcement" type="button"
                    th:arr1="${arr1}" th:arr2="${arr2}" th:arr3="${arr3}">
                save announcement
            </button>

        </div>
        <form id="saveForm"
            action="/sendData" method="POST">
            <input type="hidden" id="waypoints" name="waypoints">
            <input type="hidden" id="coordinatesOfTrip" name="coordinatesOfTrip">
            <input type="hidden" id="allRouteDuration" name="allRouteDuration">
<!--            must have! TOKEN-->
            <input type="hidden" name="_csrf" th:value="${_csrf.token}"/>
            <button type="button" onclick="sendToJava()">
            Add announcement</button>
        </form>
    </div>
</div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

<!-- Leaflet Locate Control (for finding user location) -->
<script src="https://unpkg.com/leaflet.locatecontrol@0.72.0/dist/L.Control.Locate.min.js"></script>

<!-- Leaflet Routing Machine (for route planning) -->
<script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>

<!-- Leaflet Control Geocoder (for address search) -->
<script src="https://unpkg.com/leaflet-control-geocoder@1.13.0/dist/Control.Geocoder.js"></script>

<!-- Leaflet MarkerCluster (for marker clustering) -->
<script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

<script type="text/javascript" th:src="@{/js/map.js}"></script>
</body>
</html>


